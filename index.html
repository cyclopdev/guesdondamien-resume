<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- SERIAL: v20240518-02 -->
  <meta charset="UTF-8">
  <title>Test Multilingue</title>
  <style>
    [lang] { display: none; }
    body.lang-fr [lang="fr"],
    body.lang-en [lang="en"] { display: block !important; }
    .language-flag.active { border: 2px solid blue; }
  </style>
</head>
<body>
  <div>
    <button class="language-flag active" data-lang="fr">FR</button>
    <button class="language-flag" data-lang="en">EN</button>
  </div>
  <div lang="fr">
    <h1>Bonjour</h1>
    <p>Section fran√ßaise</p>
  </div>
  <div lang="en">
    <h1>Hello</h1>
    <p>English section</p>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      function switchLanguage(lang) {
        document.body.classList.remove('lang-fr', 'lang-en');
        document.body.classList.add('lang-' + lang);
        document.querySelectorAll('.language-flag').forEach(flag => {
          flag.classList.toggle('active', flag.dataset.lang === lang);
        });
        localStorage.setItem('preferredLang', lang);
      }
      document.querySelectorAll('.language-flag').forEach(flag => {
        flag.addEventListener('click', () => switchLanguage(flag.dataset.lang));
      });
      const savedLang = localStorage.getItem('preferredLang');
      switchLanguage(savedLang || 'fr');
    });
  </script>
</body>
</html>
