<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test</title>
  <style>
    [lang] { display: none; }
    body.lang-fr [lang="fr"],
    body.lang-en [lang="en"] { display: block !important; }
    .language-flag.active { border: 2px solid blue; }
  </style>
</head>
<body>
  <div class="language-switcher">
    <button data-lang="fr" class="language-flag active">FR</button>
    <button data-lang="en" class="language-flag">EN</button>
  </div>
  <div lang="fr">Contenu Français</div>
  <div lang="en">English Content</div>
  <script>
    // JavaScript corrigé ci-dessus
    document.addEventListener('DOMContentLoaded', function() {
  function switchLanguage(lang) {
    document.body.className = ''; // Réinitialise les classes
    document.body.classList.add('lang-' + lang);
    document.querySelectorAll('.language-flag').forEach(flag => {
      flag.classList.toggle('active', flag.dataset.lang === lang);
    });
    localStorage.setItem('preferredLang', lang);
  }
  const savedLang = localStorage.getItem('preferredLang') || 'fr';
  switchLanguage(savedLang); // Force le choix initial
  document.querySelectorAll('.language-flag').forEach(flag => {
    flag.addEventListener('click', () => switchLanguage(flag.dataset.lang));
  });
});
  </script>
</body>
</html>
